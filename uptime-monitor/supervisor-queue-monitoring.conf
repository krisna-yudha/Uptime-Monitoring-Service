[program:queue-health-monitor]
command=bash -c 'while true; do php /var/www/monitoring/Uptime-Monitoring-Service/uptime-monitor/artisan queue:monitor-health && sleep 300; done'
directory=/var/www/monitoring/Uptime-Monitoring-Service/uptime-monitor
user=www-data
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/supervisor/queue-health-monitor.log
stderr_logfile=/var/log/supervisor/queue-health-monitor-error.log
stopwaitsecs=15
priority=997

[program:queue-cleanup]
command=bash -c 'while true; do php /var/www/monitoring/Uptime-Monitoring-Service/uptime-monitor/artisan queue:monitor-health --cleanup --max-age=7200 && sleep 3600; done'
directory=/var/www/monitoring/Uptime-Monitoring-Service/uptime-monitor
user=www-data
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/supervisor/queue-cleanup.log
stderr_logfile=/var/log/supervisor/queue-cleanup-error.log
stopwaitsecs=15
priority=996

[group:queue-monitoring]
programs=queue-health-monitor,queue-cleanup
