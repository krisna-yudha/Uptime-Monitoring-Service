# Supervisor Configuration for Uptime Monitor
# Copy this file to: /etc/supervisor/conf.d/uptime-monitor.conf
# 
# Installation:
# 1. sudo cp supervisor-uptime-monitor.conf /etc/supervisor/conf.d/uptime-monitor.conf
# 2. Edit paths in the file to match your installation
# 3. sudo supervisorctl reread
# 4. sudo supervisorctl update
# 5. sudo supervisorctl start uptime-monitor-checks:*
# 6. sudo supervisorctl start uptime-monitor-notifications:*

[program:uptime-monitor-checks]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/uptime-monitor/artisan worker:monitor-checks --verbose
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=www-data
numprocs=2
redirect_stderr=true
stdout_logfile=/var/www/uptime-monitor/storage/logs/worker-monitor.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5
stopwaitsecs=3600
startsecs=5
priority=999

[program:uptime-monitor-notifications]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/uptime-monitor/artisan worker:notifications --verbose
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=www-data
numprocs=1
redirect_stderr=true
stdout_logfile=/var/www/uptime-monitor/storage/logs/worker-notifications.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5
stopwaitsecs=3600
startsecs=5
priority=998
